@startuml

title H0tb0x interaction

actor Alice
database A_Group
control A_Mgr
control B_Mgr
database B_Group
actor Bob

create A_Group
Alice -> A_Group: create
Alice -> A_Group: post #1
Alice -> A_Group: post #2

Alice <-> Bob: exchange
Alice -> A_Mgr: AddFriend(Bob)

A_Mgr -> B_Mgr: CONNECT
activate B_Mgr
A_Mgr <- B_Mgr: OK
deactivate B_Mgr

Bob -> B_Mgr: AddFriend(Alice)
A_Mgr <- B_Mgr: CONNECT
activate A_Mgr
A_Mgr -> B_Mgr: OK
deactivate A_Mgr

A_Mgr -> B_Mgr: NOTIFY[Group, 2]
activate B_Mgr
create B_Group
B_Mgr -> B_Group: create
A_Mgr <- B_Mgr: OK
deactivate B_Mgr

A_Mgr <- B_Mgr: GET[Group, 1]
activate A_Mgr
A_Group <- A_Mgr: get #1
activate A_Group
A_Group -> A_Mgr
deactivate A_Group
A_Mgr -> B_Mgr
deactivate A_Mgr
B_Mgr -> B_Group: post #1
B_Group -> Bob: notify

A_Mgr <- B_Mgr: GET[Group, 2]
activate A_Mgr
A_Group <- A_Mgr: get #2
activate A_Group
A_Group -> A_Mgr
deactivate A_Group
A_Mgr -> B_Mgr
deactivate A_Mgr
B_Mgr -> B_Group: post #2
B_Group -> Bob: notify x

@enduml
